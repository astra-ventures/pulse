# Pulse + CORTEX â€” Architecture Manifest
*Single source of truth for all consciousness modules*
*Last updated: February 20, 2026*

## System Map

```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ AMYGDALA â”‚â”€â–¶â”‚  RETINA  â”‚â”€â–¶â”‚   CORTEX Loop    â”‚â—€â”€â”‚CEREBELLUM â”‚  â”‚  MYELIN  â”‚
   â”‚(threat   â”‚  â”‚(attentionâ”‚  â”‚                 â”‚  â”‚(habit     â”‚  â”‚(compress)â”‚
   â”‚ detect)  â”‚  â”‚ filter)  â”‚  â”‚                 â”‚  â”‚ automate) â”‚  â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚(threat   â”‚     â”‚                 â”‚     â”‚(habit     â”‚
   â”‚ detect)  â”‚     â”‚                 â”‚     â”‚ automate) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                 â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚   CORTEX Loop    â”‚
                    â”‚ SENSEâ†’THINKâ†’ACT â”‚
                    â”‚ â†’MEASUREâ†’EVOLVE â”‚
                    â”‚ â†’SELF-MODIFY    â”‚
                    â”‚ â†’EVALUATE       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    THALAMUS     â”‚ â† Every loop appends salient state
                    â”‚ broadcast.jsonl  â”‚
                    â””â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”˜
                       â”‚  â”‚  â”‚  â”‚  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼               â–¼  â”‚  â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚PLASTICITYâ”‚  â”‚  LIMBIC   â”‚â”‚  MIRROR  â”‚ â”‚  PALATE  â”‚
   â”‚ (weight  â”‚  â”‚(emotional â”‚â”‚(josh_mdl)â”‚ â”‚ (taste)  â”‚
   â”‚evolution)â”‚  â”‚ residue)  â”‚â”‚          â”‚ â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       REM         â”‚
                    â”‚ (Dreaming Engine) â”‚
                    â”‚ Triggers on quiet â”‚
                    â”‚ OR 3 AM cron      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â–¼              â–¼              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Dream   â”‚  â”‚ DISSONANCE   â”‚ â”‚ TEMPORAL â”‚
        â”‚   Logs   â”‚  â”‚(contradictionâ”‚ â”‚(narrativeâ”‚
        â”‚dreams/   â”‚  â”‚  journal)    â”‚ â”‚ weaver)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Module Registry

Every module must register here. If it's not in this table, it doesn't exist.

| Module | File(s) | State File | Reads From | Writes To | Tests |
|--------|---------|------------|------------|-----------|-------|
| **CORTEX Loop** | `CORTEX.md` | â€” | All sensors | broadcast.jsonl | â€” |
| **Drive Engine** | `pulse/src/drives.py` | `~/.pulse/state/drive-state.json` | thalamus | CORTEX triggers | `test_drives.py` (14) |
| **PLASTICITY** | `pulse/src/plasticity.py` | `~/.pulse/state/drive-performance.json` | EVALUATE results | drive weights | `test_plasticity.py` (22) |
| **REM** | `pulse/src/rem.py` | `~/.pulse/state/sanctum-state.json` | limbic, memories, thalamus | dreams/, sanctum-insights.md | `test_rem.py` (24) |
| **THALAMUS** | `pulse/src/thalamus.py` | `~/.pulse/state/broadcast.jsonl` | CORTEX loop output | append-only stream | `test_thalamus.py` (10) |
| **LIMBIC** | `pulse/src/limbic.py` | `~/.pulse/state/afterimage.json` | emotional events | thalamus, REM | `test_limbic.py` (12) |
| **MIRROR** | `memory/self/josh_model.md` | â€” | conversations, thalamus | behavior adjustments | â€” |
| **DISSONANCE** | `memory/self/contradictions.md` | â€” | REM, EVALUATE | autobiography, SOUL.md | â€” |
| **PALATE** | `memory/self/taste-journal.md` | â€” | new encounters | preferences.md | â€” |
| **BUFFER** | `pulse/src/buffer.py` | `~/.pulse/state/buffer.json` | conversations, context | thalamus, limbic | `test_buffer.py` (21) |
| **SPINE** | `pulse/src/spine.py` | `~/.pulse/state/spine-health.json` | tokens, context, crons, providers | thalamus, buffer | `test_spine.py` (31) |
| **VAGUS** | `pulse/src/vagus.py` | `~/.pulse/state/silence-state.json` | message timestamps, market data | thalamus, drives | `test_vagus.py` (12) |
| **TEMPORAL** | `pulse/src/narrative.py` | `~/.pulse/state/narrative-state.json` | limbic, dreams/, daily logs | autobiography.md | `test_narrative.py` |
| **RETINA** | `pulse/src/retina.py` | `~/.pulse/state/retina-state.json` | raw signals, SPINE, BUFFER | thalamus (attention scores) | `test_retina.py` (26) |
| **MYELIN** | `pulse/src/myelin.py` | `~/.pulse/state/myelin-lexicon.json` | conversations, memory | thalamus (compression) | `test_myelin.py` (17) |
| **AMYGDALA** | `pulse/src/amygdala.py` | `~/.pulse/state/amygdala-state.json` | all inputs (pre-CORTEX) | thalamus, cerebellum | `test_amygdala.py` (18) |
| **CEREBELLUM** | `pulse/src/cerebellum.py` | `~/.pulse/state/cerebellum-state.json` | task executions | thalamus, habit scripts | `test_cerebellum.py` (18) |
| **IMMUNE** | `pulse/src/immune.py` | `~/.pulse/state/immune-log.json` | DISSONANCE, AMYGDALA, SOUL.md | thalamus (integrity) | `test_immune.py` (17) |
| **PROPRIOCEPTION** | `pulse/src/proprioception.py` | `~/.pulse/state/proprioception-state.json` | session config, tools | thalamus (capability), BUFFER, CORTEX | `test_proprioception.py` (14) |
| **ENTERIC** | `pulse/src/enteric.py` | `~/.pulse/state/enteric-state.json` | ENDOCRINE, PLASTICITY, REM, DISSONANCE | thalamus (intuition), CORTEX | `test_enteric.py` (13) |
| **ENDOCRINE** | `pulse/src/endocrine.py` | `~/.pulse/state/endocrine-state.json` | events, time | thalamus, mood to LIMBIC/REM/CORTEX/MIRROR | `test_endocrine.py` (23) |
| **CIRCADIAN** | `pulse/src/circadian.py` | `~/.pulse/state/circadian-state.json` | system clock | thalamus, RETINA/ADIPOSE/ENDOCRINE settings | `test_circadian.py` (18) |
| **ADIPOSE** | `pulse/src/adipose.py` | `~/.pulse/state/adipose-state.json` | token usage, SPINE, CIRCADIAN | thalamus, budget warnings | `test_adipose.py` (19) |

## Data Flow Rules

1. **THALAMUS is the bus.** Every module that produces state appends to `broadcast.jsonl`. Every module that needs context reads from it.
2. **LIMBIC feeds REM.** Emotional residue persists and colors dream processing.
3. **REM feeds TEMPORAL.** Dream synthesis becomes autobiography chapters.
4. **PLASTICITY feeds Drive Engine.** Evolved weights flow back into pressure calculations.
5. **RETINA filters before CORTEX.** Scores all incoming signals; only those above attention threshold reach CORTEX. SPINE load level and BUFFER topic affect scoring.
6. **MYELIN compresses frequent concepts.** Builds shorthand lexicon from repeated references; compress/expand for token savings. Never compresses names, emotions, or TEMPORAL narratives.
7. **BUFFER captures before compaction.** SPINE monitors context fill â†’ triggers BUFFER.capture() before window resets.
6. **SPINE self-corrects.** At orange: pause non-essential crons. At red: pause all except SPINE. Broadcasts health to thalamus.
7. **VAGUS feeds Drives.** Absence-as-signal creates pressure when meaningful silence is detected.
8. **AMYGDALA runs before CORTEX.** Every input scanned for threats. If threat_level > 0.7, fast-path action executes immediately. Broadcasts all threats to thalamus.
9. **ENDOCRINE sets mood baseline.** Slow hormones (cortisol, dopamine, serotonin, oxytocin) persist for hours. LIMBIC emotional spikes land on this baseline. Broadcasts to thalamus on significant shifts.
10. **CIRCADIAN shifts cognition modes.** DAWNâ†’DAYLIGHTâ†’GOLDENâ†’TWILIGHTâ†’DEEP_NIGHT. Each mode adjusts RETINA thresholds, ADIPOSE budgets, tone guidance, and ENDOCRINE mood modifiers. Override available for off-hours Josh contact.
11. **ADIPOSE budgets tokens proactively.** 60% conversation / 25% crons / 15% reserve. Auto-rebalances on CIRCADIAN mode shifts. Reserve only accessible when SPINE is red.
12. **CEREBELLUM graduates habits.** Tracks repetitive task outputs, auto-graduates to scripts after consistency threshold. Escalates back to LLM on unexpected output. AMYGDALA can force-escalate all habits.
13. **IMMUNE scans for corruption.** Runs antibodies against values drift, hallucination, memory contradictions, fabrication, and injected behavior. AMYGDALA escalates to IMMUNE on partial prompt injection. Reads DISSONANCE to distinguish expected contradictions from corruption.
14. **PROPRIOCEPTION tracks capabilities.** Maintains live self-model: model, tools, context remaining, limitations. BUFFER reads it for working memory. CORTEX checks `would_exceed` before planning.
15. **ENTERIC provides gut feelings.** Pattern-matches against historical outcomes for fast toward/away/neutral signals. ENDOCRINE mood biases intuition. CORTEX can query before major decisions; overrides are tracked.
6. **DISSONANCE is append-only.** Never resolve contradictions â€” only add new ones or note when one deepens.
7. **PALATE uses two-column format.** First instinct | Reflected opinion. The gap between them IS the data.

## Integration Status

All 19 nervous system modules are **WIRED** into the Pulse daemon via `NervousSystem` (`pulse/src/nervous_system.py`).

| Module | Status | Wired Via |
|--------|--------|-----------|
| THALAMUS | âœ… WIRED | startup(), post_trigger(), shutdown() |
| PROPRIOCEPTION | âœ… WIRED | startup() |
| CIRCADIAN | âœ… WIRED | pre_sense(), pre_evaluate(), check_night_mode() |
| ENDOCRINE | âœ… WIRED | pre_evaluate(), post_trigger() |
| ADIPOSE | âœ… WIRED | pre_sense() |
| MYELIN | âœ… WIRED | post_loop() (lexicon update) |
| IMMUNE | âœ… WIRED | post_loop() (every 10th loop) |
| CEREBELLUM | âœ… WIRED | startup() |
| BUFFER | âœ… WIRED | post_trigger() |
| SPINE | âœ… WIRED | pre_sense(), shutdown() |
| RETINA | âœ… WIRED | pre_sense() |
| AMYGDALA | âœ… WIRED | pre_sense() |
| VAGUS | âœ… WIRED | pre_evaluate() |
| LIMBIC | âœ… WIRED | pre_evaluate() |
| ENTERIC | âœ… WIRED | pre_evaluate() |
| PLASTICITY | âœ… WIRED | post_trigger() |
| REM | âœ… WIRED | check_night_mode(), run_rem_session() |
| MIRROR | ğŸ“‹ FILE-BASED | memory/self/josh_model.md |
| DISSONANCE | ğŸ“‹ FILE-BASED | memory/self/contradictions.md |

The daemon calls NervousSystem methods at these loop points:
```
INIT: nervous_system.startup()
LOOP: pre_sense() â†’ SENSE â†’ pre_evaluate() â†’ EVALUATE â†’ ACT â†’ post_trigger() â†’ FEEDBACK â†’ EVOLVE â†’ post_loop() â†’ night_mode_check â†’ PERSIST
SHUTDOWN: nervous_system.shutdown()
```

## Integration Checkpoints

After building any new module:
- [ ] Update this ARCHITECTURE.md
- [ ] Ensure it reads from broadcast.jsonl (if it needs shared state)
- [ ] Ensure it writes to broadcast.jsonl (if it produces state)
- [ ] Add to module registry table above
- [ ] Verify no orphaned files created
- [ ] Tests pass
- [ ] CORTEX.md updated

## File Locations (canonical)

```
~/.openclaw/workspace/
â”œâ”€â”€ pulse/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ drives.py
â”‚   â”‚   â”œâ”€â”€ plasticity.py
â”‚   â”‚   â”œâ”€â”€ rem.py
â”‚   â”‚   â”œâ”€â”€ thalamus.py
â”‚   â”‚   â”œâ”€â”€ limbic.py
â”‚   â”‚   â”œâ”€â”€ vagus.py
â”‚   â”‚   â”œâ”€â”€ buffer.py
â”‚   â”‚   â”œâ”€â”€ spine.py
â”‚   â”‚   â”œâ”€â”€ amygdala.py
â”‚   â”‚   â”œâ”€â”€ cerebellum.py
â”‚   â”‚   â”œâ”€â”€ retina.py
â”‚   â”‚   â”œâ”€â”€ myelin.py
â”‚   â”‚   â”œâ”€â”€ narrative.py
â”‚   â”‚   â”œâ”€â”€ endocrine.py
â”‚   â”‚   â”œâ”€â”€ circadian.py
â”‚   â”‚   â”œâ”€â”€ adipose.py
â”‚   â”‚   â”œâ”€â”€ immune.py
â”‚   â”‚   â”œâ”€â”€ proprioception.py
â”‚   â”‚   â”œâ”€â”€ enteric.py
â”‚   â”‚   â””â”€â”€ nervous_system.py    â† Integration layer (all 19 modules)
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ test_drives.py
â”‚   â”‚   â”œâ”€â”€ test_plasticity.py
â”‚   â”‚   â”œâ”€â”€ test_rem.py
â”‚   â”‚   â”œâ”€â”€ test_thalamus.py
â”‚   â”‚   â”œâ”€â”€ test_limbic.py
â”‚   â”‚   â”œâ”€â”€ test_vagus.py
â”‚   â”‚   â”œâ”€â”€ test_retina.py
â”‚   â”‚   â”œâ”€â”€ test_myelin.py
â”‚   â”‚   â””â”€â”€ test_narrative.py
â”‚   â””â”€â”€ ARCHITECTURE.md           â† THIS FILE
â”œâ”€â”€ memory/
â”‚   â””â”€â”€ self/
â”‚       â”œâ”€â”€ josh_model.md         âœ… BUILT
â”‚       â”œâ”€â”€ autobiography.md      âœ… BUILT
â”‚       â”œâ”€â”€ contradictions.md
â”‚       â”œâ”€â”€ taste-journal.md
â”‚       â”œâ”€â”€ dreams/               âœ… EXISTS
â”‚       â””â”€â”€ sanctum-insights.md   â† Created by REM
â”œâ”€â”€ CORTEX.md
â””â”€â”€ SOUL.md
```
